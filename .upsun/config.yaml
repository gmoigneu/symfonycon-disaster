# Upsun configuration, generated using AI at: 2025-11-24T09:12:57.839Z
# AI can make mistakes. Please modify this file to suit your needs.
applications:
  app:
    type: php:8.4

    build:
      flavor: none

    hooks:
      build: |
        set -ex
        curl -sfS https://get.symfony.com/cloud/configurator | bash
        symfony-build

      deploy: |
        set -ex
        symfony-deploy

    web:
      locations:
        /:
          root: public
          passthru: /index.php
          expires: 5m

    runtime:
      extensions:
        - pdo_pgsql  # PostgreSQL support
        - apcu
        - mbstring
        - sodium

    relationships:
      database: {}

    mounts:
      var/cache:
        source: tmp
      var/log:
        source: storage

    variables:
      php:
        opcache.preload: config/preload.php

services:
  database:
    type: postgresql:18

routes:
  https://{default}/:
    type: upstream
    upstream: app:http
